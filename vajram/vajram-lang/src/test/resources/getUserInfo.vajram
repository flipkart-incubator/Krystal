package com.flipkart.krystal.vajram.lang.samples.friends;

import com.flipkart.userservice.models.UserServiceClient;

public UserInfo getUserInfo(
    @mod @input string userId,
    @inject UserServiceClient svcClient)
    client* sayHelloToFriends {

  {
      svcClient~getUserInfo(
          UserServiceClient.makeUserInfoRequest(
              #mod().stream()
                  .map(_.userId())
                  .toSet()));
  }.then {
    _?userInfos()
        .stream()
        .toMap {
          new #mod(_.userId()), _;
        }
  }
}