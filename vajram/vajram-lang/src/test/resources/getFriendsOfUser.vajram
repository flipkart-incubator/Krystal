package com.flipkart.krystal.vajram.lang.samples.friends;

import java.lang.Set;

public Set<string> getFriendsOfUser(
    @mod @input string userId,
    @inject FriendServiceClient svcClient){

  {
    svcClient~getFriendsIds(
        FriendServiceClient.makeFriendIdsRequest(
            #mod().stream()
                .map(_.userId)
                .toSet()))
        .then {
            _.stream()
                .toMap({
                  return new #mod(_.userId()), _.friendIds();
                })
        }
  }
}