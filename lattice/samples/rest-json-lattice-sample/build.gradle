plugins {
    id 'java'
    id 'application'
    id 'com.flipkart.krystal' version "${krystal_version}"
    id 'com.flipkart.java.code.standard' version "${java_code_std_version}"
    id 'io.quarkus' version "${quarkus_version}"
}

application {
    mainClass = 'com.flipkart.krystal.lattice.samples.rest.json.sampleRestService.app.SampleRestfulLatticeApp_Impl'
}

dependencies {
    /** START: Lattice dependencies **/

    implementation platform("com.flipkart.krystal:lattice-bom:${lattice_version}")
    implementation platform("io.quarkus.platform:quarkus-bom:${quarkus_version}")
    krystalModelsGenProcessor platform("com.flipkart.krystal:lattice-bom:${lattice_version}")

    implementation 'com.flipkart.krystal:lattice-rest-quarkus'
    implementation 'com.flipkart.krystal:lattice-guice-servlet'
    implementation 'com.flipkart.krystal:lattice-core'
    implementation 'com.flipkart.krystal:vajram-json'
    implementation 'com.flipkart.krystal:vajram-java-sdk'

    krystalModelsGenProcessor 'com.flipkart.krystal:lattice-codegen'
    krystalModelsGenProcessor 'com.flipkart.krystal:lattice-guice-codegen'
    krystalModelsGenProcessor 'com.flipkart.krystal:lattice-json-codegen'
    krystalModelsGenProcessor 'com.flipkart.krystal:lattice-rest-quarkus-codegen'
    krystalModelsGenProcessor 'com.flipkart.krystal:lattice-rest-codegen'
    krystalModelsGenProcessor 'com.flipkart.krystal:vajram-codegen'
    krystalModelsGenProcessor 'com.flipkart.krystal:vajram-json'
    krystalModelsGenProcessor 'com.flipkart.krystal:vajram-json-codegen'

    testImplementation 'com.flipkart.krystal:vajram-guice'
    testImplementation 'com.flipkart.krystal:vajram-krystex'

    /** END: Lattice dependencies **/

    runtimeOnly 'jakarta.servlet:jakarta.servlet-api'

    implementation 'com.google.inject.extensions:guice-servlet'
    implementation 'jakarta.inject:jakarta.inject-api'
    implementation 'javax.annotation:javax.annotation-api'

    compileOnly "org.projectlombok:lombok:$lombok_version"
    compileOnly 'com.google.auto.value:auto-value-annotations:1.11.0'
    annotationProcessor 'com.google.auto.value:auto-value:1.11.0'

    testImplementation 'org.junit.jupiter:junit-jupiter-api'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine'
    implementation platform('org.assertj:assertj-bom:3.25.2')
    testImplementation 'org.assertj:assertj-core'
}

extraJavaModuleInfo {
    failOnMissingModuleInfo = false
}
